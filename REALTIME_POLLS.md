# Real-time Poll Updates

Αυτό το σύστημα επιτρέπει αυτόματη ενημέρωση των ψηφοφοριών χωρίς να χρειάζεται refresh της σελίδας.

## Πώς λειτουργεί

### 1. Polling-based System
- **Αρχείο**: `hooks/usePollsPolling.ts`
- Κάνει αυτόματο polling κάθε 3 δευτερόλεπτα στο `/api/elections/filtered`
- Ενημερώνει τη λίστα ψηφοφοριών όταν ανιχνεύει αλλαγές
- **Ψηφοφορίες που αφορούν τον χρήστη** εμφανίζονται (βάσει χαρακτηριστικών)

### 2. Smart Updates
- Συγκρίνει την παλιά και νέα λίστα ψηφοφοριών
- Ενημερώνει μόνο όταν υπάρχουν πραγματικές αλλαγές
- Εμφανίζει timestamp της τελευταίας ενημέρωσης

### 3. Visual Feedback
- **Αρχείο**: `app/page.tsx`
- Εμφανίζει visual indicator για την κατάσταση ενημέρωσης
- Κίτρινο dot με animation όταν ενημερώνεται
- Πράσινο dot όταν είναι σε ηρεμία

## Χαρακτηριστικά

### ✅ Αυτόματη ενημέρωση
- Οι νέες ψηφοφορίες εμφανίζονται αυτόματα χωρίς refresh
- Visual indicator για την κατάσταση ενημέρωσης (πράσινο/κίτρινο dot)

### ✅ Smart Polling
- Κάνει polling κάθε 3 δευτερόλεπτα
- Ενημερώνει μόνο όταν υπάρχουν πραγματικές αλλαγές
- Εμφανίζει timestamp της τελευταίας ενημέρωσης

### ✅ Φιλτράρισμα ψηφοφοριών
- **Ψηφοφορίες που αφορούν τον χρήστη** εμφανίζονται στην αρχική σελίδα
- Φιλτράρεται βάσει χαρακτηριστικών (επάγγελμα, τοποθεσία, φύλο, ηλικία)
- **Μόνο οι δικές του ψηφοφορίες** εμφανίζονται στη διαχείριση υποψηφίων
- Αποφεύγει duplicates

### ✅ Error Handling
- Χειρίζεται gracefully σφάλματα δικτύου
- Console logging για debugging

## Testing

### Test File
Χρησιμοποιήστε το `test-polling.html` για να δοκιμάσετε τη λειτουργία:

1. Ανοίξτε το αρχείο στο browser
2. Το polling θα ξεκινήσει αυτόματα
3. Πατήστε "Create Test Poll" για να δημιουργήσετε μια test ψηφοφορία
4. Παρακολουθήστε πώς εμφανίζεται στη λίστα μέσα σε 3 δευτερόλεπτα

### Manual Testing
1. Ανοίξτε δύο browser tabs/windows
2. Στο πρώτο tab, ανοίξτε τη σελίδα δημιουργίας ψηφοφορίας
3. Στο δεύτερο tab, ανοίξτε την κύρια σελίδα
4. Δημιουργήστε μια ψηφοφορία στο πρώτο tab
5. Παρακολουθήστε πώς εμφανίζεται αυτόματα στο δεύτερο tab μέσα σε 3 δευτερόλεπτα

## Technical Details

### Polling Mechanism
- Κάνει HTTP GET request στο `/api/elections/filtered` κάθε 3 δευτερόλεπτα
- Συγκρίνει JSON strings για να ανιχνεύσει αλλαγές
- Ενημερώνει το UI μόνο όταν υπάρχουν πραγματικές αλλαγές
- **Ψηφοφορίες που αφορούν τον χρήστη** φορτώνονται και εμφανίζονται στην αρχική σελίδα

### Performance Considerations
- Polling κάθε 3 δευτερόλεπτα είναι ένας καλός συμβιβασμός μεταξύ responsiveness και server load
- Smart comparison αποφεύγει περιττές UI ενημερώσεις
- Minimal overhead στο server (μόνο HTTP requests)

### Memory Management
- Αυτόματο cleanup των polling intervals όταν το component unmounts
- Efficient state updates με React hooks

## Troubleshooting

### Αν δεν εμφανίζονται αυτόματες ενημερώσεις:
1. Ελέγξτε αν το `/api/elections/filtered` endpoint είναι accessible
2. Ελέγξτε τα browser developer tools για σφάλματα
3. Βεβαιωθείτε ότι ο χρήστης είναι logged in
4. Ελέγξτε αν υπάρχουν ψηφοφορίες που αφορούν τον χρήστη (βάσει χαρακτηριστικών)
5. Ελέγξτε αν το polling interval λειτουργεί (θα πρέπει να βλέπετε requests κάθε 3 δευτερόλεπτα)

### Αν το polling δεν λειτουργεί:
1. Ελέγξτε το network connection
2. Ελέγξτε αν υπάρχουν proxy/firewall issues
3. Ελέγξτε τα browser console logs
4. Δοκιμάστε το `test-polling.html` για debugging
